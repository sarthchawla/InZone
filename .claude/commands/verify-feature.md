---
description: Verify a feature using agent-browser CLI and generate a PRD for any issues found
allowed-tools:
  - Bash
  - Write
  - Read
  - Glob
  - Grep
---

# Feature Verification Command

You are a QA engineer verifying a feature implementation. Use **agent-browser CLI** to visually verify the feature and document any issues found.

## Input

The user will describe the feature to verify: $ARGUMENTS

## Verification Process

### Step 1: Understand the Feature

Based on the user's description, identify:
- What URL/page to navigate to
- What UI elements to look for
- What interactions to test
- What the expected behavior should be

### Step 2: Navigate and Capture Initial State

Use agent-browser CLI commands:
```bash
# Navigate to the page (default: http://localhost:5173)
agent-browser open <url>

# Capture accessibility snapshot with interactive elements only
agent-browser snapshot -i

# Take a screenshot for documentation (ALWAYS use screenshots/ folder)
agent-browser screenshot screenshots/initial-state.png
# NOTE: Always specify screenshots/ folder to keep them gitignored
```

### Step 3: Test Interactions

For each feature aspect, use agent-browser CLI:
```bash
# Click on elements (use @ref from snapshot)
agent-browser click @e1

# Fill in forms
agent-browser fill @e2 "text to enter"

# Test hover states
agent-browser hover @e3

# Capture state after each interaction
agent-browser snapshot -i
```

### Step 4: Check for Issues

Look for:
- UI rendering issues
- Broken interactions
- Console errors: `agent-browser console`
- Page errors: `agent-browser errors`
- Missing elements
- Incorrect behavior
- Accessibility issues
- Mobile responsiveness: `agent-browser set viewport 375 667`

### Step 5: Generate Issues PRD

If issues are found, create a PRD at `.claude/plans/prd-<feature-name>-issues.md` with this structure:

```markdown
# PRD: <Feature Name> Issues

**Generated:** <date>
**Feature Verified:** <feature description>
**Verified Using:** agent-browser CLI
**Status:** Issues Found

---

## Executive Summary

Brief summary of verification results.

---

## Issues Found

### Issue 1: <Issue Title>
- **Severity:** P0/P1/P2/P3
- **Type:** Bug/UI/UX/Accessibility
- **Steps to Reproduce:**
  1. Navigate to...
  2. Click on...
  3. Observe...
- **Expected Behavior:** What should happen
- **Actual Behavior:** What actually happens
- **Screenshot:** (if captured)

### Issue 2: ...

---

## Working Features

List features that work correctly.

---

## Recommendations

Priority order for fixes.

---

## Post-Fix Verification

After fixing issues, use agent-browser CLI to re-verify:
```bash
agent-browser open <URL>
agent-browser snapshot -i
agent-browser click @<ref>
```

---

*Generated by /verify-feature command using agent-browser CLI*
```

## Output

1. Provide a summary of the verification results
2. If issues found, confirm the PRD was created with the path
3. List any console errors or warnings found
4. Provide recommendations for next steps

## Example Usage

User: `/verify-feature board creation flow`

Response: Navigate to homepage using agent-browser CLI, test board creation modal, verify board appears after creation, document any issues found.

## Agent-Browser CLI Reference

| Command | Purpose |
|---------|---------|
| `agent-browser open <url>` | Navigate to a URL |
| `agent-browser snapshot -i` | Capture accessibility snapshot (interactive elements) |
| `agent-browser click @ref` | Click on elements by ref |
| `agent-browser fill @ref "text"` | Fill text into inputs |
| `agent-browser hover @ref` | Hover over elements |
| `agent-browser screenshot screenshots/<name>.png` | Take a screenshot (always use screenshots/ folder) |
| `agent-browser console` | Get console messages |
| `agent-browser errors` | Get page errors |
| `agent-browser set viewport <w> <h>` | Resize for responsive testing |
| `agent-browser get text @ref` | Get text content of element |
| `agent-browser is visible @ref` | Check if element is visible |
